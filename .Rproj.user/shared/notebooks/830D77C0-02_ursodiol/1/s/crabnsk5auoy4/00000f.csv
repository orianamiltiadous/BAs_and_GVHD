"0","#summarize bile acid pools
both_conc<- cohort_BAS %>% select(-ursodiol)%>%
  left_join(conc_all_filtered) %>% clean_names()
"
"2","Joining with `by = join_by(sampleid)`"
"0","#prep dataset prepping each BA depending on its classifications"
"0","both_conc_pools<-both_conc %>% "
"0","  gather(""bile_acid"", ""value"", names(.)[8]:names(.)[ncol(.)]) %>% "
"0","  select(-gi_gvhd, -later, -periengr) %>% "
"0","  left_join(ba_families) %>% "
"0","  filter(bile_acid!=""beta_muricholic_acid"") %>% #removing because it's not measured in all samples"
"0","  filter(bile_acid!=""omega_muricholic_acid"") %>%  #removing because it's not measured in all samples"
"0","  mutate(primary_pool=ifelse(prim_vs_sec==""Primary"", value, 0)) %>% "
"0","  mutate(secondary_pool=ifelse(prim_vs_sec==""Secondary"", value, 0)) %>% "
"0","  mutate(sulfated_pool=ifelse(sulfated==""Y"", value, 0)) %>% "
"0","  mutate(conjugated_pool=ifelse(amidated==""Y"" & sulfated==""N"", value, 0)) %>% "
"0","  mutate(unconjugated_pool=ifelse(amidated==""N"" & sulfated==""N"", value, 0)) %>% "
"0","  mutate(secondary_nonUDCA=ifelse(prim_vs_sec==""Secondary"" & udca==""N"", value, 0)) %>% "
"0","  mutate(total_BAs=value) %>% "
"0","  mutate(total_nonUDCA_pool=ifelse(udca==""N"", value, 0)) %>% "
"0","  mutate(glycine_pool=ifelse(glycine==""Y"" & sulfated==""N"", value, 0)) %>% "
"0","  mutate(taurine_pool=ifelse(taurine==""Y"" & sulfated==""N"", value, 0)) %>% "
"0","  mutate(taurine_SBA_pool=ifelse(taurine==""Y"" & prim_vs_sec==""Secondary"" & sulfated==""N"", value, 0)) %>% "
"0","  mutate(taurine_PBA_pool=ifelse(taurine==""Y"" & prim_vs_sec==""Primary"" & sulfated==""N"", value, 0)) %>% "
"0","  mutate(glycine_SBA_pool=ifelse(glycine==""Y""& prim_vs_sec==""Secondary"" & sulfated==""N"", value, 0)) %>% "
"0","  mutate(glycine_PBA_pool=ifelse(glycine==""Y"" &prim_vs_sec==""Primary""& sulfated==""N"", value, 0)) %>% "
"0","  select(-colnames(ba_families), -value) "
"2","Joining with `by = join_by(bile_acid)`"
"0","both_conc_pools_final<-both_conc_pools %>% "
"0","  group_by(sampleid) %>% "
"0","  summarise(across(where(is.numeric), sum)) %>% "
"0","  left_join(ursodiol)"
"2","Joining with `by = join_by(sampleid)`"
"0","#rearrange ursodiol"
"0","both_conc_pools_final$ursodiol <-factor(both_conc_pools_final$ursodiol, "
"0","                           levels=c(""Y"",""2-3w"",""3-4w"",""1-2m"", ""N""))"
